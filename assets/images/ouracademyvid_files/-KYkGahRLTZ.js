;/*FB_PKG_DELIM*/

__d("WAWebPipMsgVideoTag.react",["WAWebCometVideoPlayerUtils","WAWebMsgGetters","WAWebPipUrlVideoTagLoadable.react","WAWebUserPrefsGeneral","WAWebVideoUtils","react","useMergeRefs","useWAWebCanPlaybackAudio","useWAWebCometVideoPlayerStateMachine","useWAWebModelValues","useWAWebMsgValues","useWAWebOnUnmount","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h=["ref"],i,j;b=j||d("react");var k=i||(i=c("react")),l=b.useCallback,m=b.useEffect,n=b.useRef;function a(a){var b=a.ref;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var e=a.onLoadedMetadata,f=d("useWAWebMsgValues").useMsgValues(a.msg.id,[d("WAWebMsgGetters").getId]);f[0];var g=d("useWAWebModelValues").useModelValues(a.mediaData,["mediaBlob","streamable","aspectRatio"]),i=n(null),j=c("useMergeRefs")(b,i);f=c("useWAWebCometVideoPlayerStateMachine")(babelHelpers["extends"]({},d("WAWebCometVideoPlayerUtils").getChannelMediaMetadataForSNAPL(a.msg),{isCopyrightMuted:!d("useWAWebCanPlaybackAudio").useCanPlaybackAudio(a.msg),videoOrigin:a.msg.getWamMessageType()}));b=f.callbacks;var o=f.videoElementRefCallback,p=f.handleReactEffectCleanup,q=f.handleReactEffectInit;m(function(){q()},[q]);c("useWAWebOnUnmount")(function(){p()});f=c("useWAWebStableCallback")(function(a){if(i.current===a)return;var b=a==null?void 0:a.underlyingVideo();b!=null&&o(b);j(a);if(a){b=d("WAWebUserPrefsGeneral").getMediaVolumeSettings();var c=b.volume;b=b.muted;c!=null&&a.setVolume(c);a.setMuted(b)}});var r=l(function(a,b){var c=g.aspectRatio,d=a.videoWidth!==0&&a.videoHeight!==0?a.videoWidth/a.videoHeight:void 0;(!c&&d!=null&&d!==0||c&&d!=null&&d!==0&&Math.abs(d-c)>.01)&&g.set({aspectRatio:d});e(a,b)},[g,e]),s=d("WAWebVideoUtils").getVideoUrl(a.msg,g);return k.jsx(d("WAWebPipUrlVideoTagLoadable.react").UrlVideoTagLoadable,{msg:a.msg,ref:f,url:s,startTime:a.startTime,poster:a.poster,className:a.className,onVolumeChange:a.onVolumeChange,onEnded:a.onEnded,onError:a.onError,onPause:a.onPause,onPlaying:a.onPlaying,onProgress:a.onProgress,onTimeUpdate:a.onTimeUpdate,onLoadedMetadata:r,autoPlay:a.autoPlay,onCanPlay:a.onCanPlay,onLoadedData:a.onLoadedData,onWaiting:a.onWaiting,callbacks:b,children:a.children})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);