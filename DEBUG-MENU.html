<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç DEBUG - What's Wrong With Menu?</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Courier New', monospace; background: #1a202c; color: #10b981; padding: 20px; }
        
        .container { max-width: 1200px; margin: 0 auto; }
        
        .header {
            background: #10b981;
            color: #1a202c;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .header h1 { font-size: 2rem; margin-bottom: 10px; }
        
        .section {
            background: #2d3748;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .section h2 {
            color: #f59e0b;
            margin-bottom: 15px;
            border-bottom: 2px solid #374151;
            padding-bottom: 10px;
        }
        
        .code-block {
            background: #1a202c;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #10b981;
            margin: 10px 0;
            overflow-x: auto;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        .error { color: #ef4444; }
        .success { color: #10b981; }
        .warning { color: #f59e0b; }
        .info { color: #3b82f6; }
        
        .button {
            background: #10b981;
            color: #1a202c;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 10px 10px 0;
        }
        
        .button:hover {
            background: #059669;
        }
        
        iframe {
            width: 100%;
            height: 600px;
            border: 3px solid #10b981;
            border-radius: 10px;
            background: white;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>üîç MENU DEBUG TOOL</h1>
        <p>Let's find out EXACTLY what's wrong</p>
    </div>
    
    <div class="section">
        <h2>üì± Your Site (Click hamburger while watching this page)</h2>
        <iframe src="index.html" id="siteFrame"></iframe>
    </div>
    
    <div class="section">
        <h2>üõ†Ô∏è Diagnostic Controls</h2>
        <button class="button" onclick="runFullDiagnostic()">üîç Run Full Diagnostic</button>
        <button class="button" onclick="forceOpenMenu()">‚ö° Force Open Menu</button>
        <button class="button" onclick="checkCSS()">üìä Check CSS Files</button>
        <button class="button" onclick="clearCache()">üóëÔ∏è Clear & Reload</button>
    </div>
    
    <div class="section">
        <h2>üìã Diagnostic Output</h2>
        <div class="code-block" id="output">
Click "Run Full Diagnostic" to start...
        </div>
    </div>
    
    <div class="section">
        <h2>üí° What to Do Based on Results</h2>
        <div class="code-block">
<span class="warning">IF hamburger NOT FOUND:</span>
‚Üí HTML structure issue
‚Üí Element doesn't exist in DOM

<span class="warning">IF nav NOT FOUND:</span>
‚Üí Menu element missing
‚Üí Check selector: .main-nav .nav

<span class="warning">IF right = -100% AFTER clicking:</span>
‚Üí CSS not applying
‚Üí Class added but styles not working
‚Üí Need stronger CSS specificity

<span class="warning">IF right = 0px but menu NOT VISIBLE:</span>
‚Üí Z-index issue (covered by something)
‚Üí Opacity = 0 somewhere
‚Üí Display = none overriding

<span class="warning">IF display = none:</span>
‚Üí CSS file loading after inline styles
‚Üí Need to check CSS load order

<span class="success">IF right = 0px AND display = flex:</span>
‚Üí CSS is correct!
‚Üí Issue might be visual (colors, etc)
        </div>
    </div>
</div>

<script>
function log(message, type = 'info') {
    const output = document.getElementById('output');
    const color = {
        'error': 'class="error"',
        'success': 'class="success"',
        'warning': 'class="warning"',
        'info': 'class="info"'
    }[type] || '';
    
    output.innerHTML += `<div ${color}>${message}</div>`;
}

function clearOutput() {
    document.getElementById('output').innerHTML = '';
}

function runFullDiagnostic() {
    clearOutput();
    log('üîç STARTING FULL DIAGNOSTIC...', 'warning');
    log('='.repeat(60));
    
    try {
        const iframe = document.getElementById('siteFrame');
        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
        
        log('\n<span class="success">‚úì iFrame accessible</span>');
        
        // Find hamburger
        const hamburger = iframeDoc.querySelector('.menu-trigger');
        if (hamburger) {
            log('<span class="success">‚úì Hamburger found</span>');
            log(`  Element: ${hamburger.tagName}.${hamburger.className}`);
            
            const hambStyles = window.getComputedStyle(hamburger);
            log(`\n  Hamburger Styles:`);
            log(`    display: ${hambStyles.display}`);
            log(`    position: ${hambStyles.position}`);
            log(`    top: ${hambStyles.top}`);
            log(`    right: ${hambStyles.right}`);
            log(`    z-index: ${hambStyles.zIndex}`);
            log(`    background: ${hambStyles.backgroundColor}`);
        } else {
            log('<span class="error">‚úó Hamburger NOT FOUND</span>', 'error');
        }
        
        // Find nav
        const nav = iframeDoc.querySelector('.main-nav .nav');
        if (nav) {
            log('\n<span class="success">‚úì Nav menu found</span>');
            log(`  Element: ${nav.tagName}.${nav.className}`);
            log(`  Has mobile-active class: ${nav.classList.contains('mobile-active')}`);
            
            const navStyles = window.getComputedStyle(nav);
            log(`\n  Nav Styles (CURRENT):`);
            log(`    position: ${navStyles.position}`);
            log(`    <span class="${navStyles.right === '0px' ? 'success' : 'error'}">right: ${navStyles.right}</span> ${navStyles.right === '0px' ? '‚úì VISIBLE' : '‚úó HIDDEN'}`);
            log(`    left: ${navStyles.left}`);
            log(`    width: ${navStyles.width}`);
            log(`    height: ${navStyles.height}`);
            log(`    <span class="${navStyles.display === 'flex' ? 'success' : 'warning'}">display: ${navStyles.display}</span>`);
            log(`    background: ${navStyles.backgroundColor}`);
            log(`    z-index: ${navStyles.zIndex}`);
            log(`    visibility: ${navStyles.visibility}`);
            log(`    opacity: ${navStyles.opacity}`);
            log(`    transform: ${navStyles.transform}`);
            
            // Count menu items
            const menuItems = nav.querySelectorAll('li');
            log(`\n  Menu items: ${menuItems.length}`);
            
        } else {
            log('\n<span class="error">‚úó Nav menu NOT FOUND</span>', 'error');
        }
        
        // Check body classes
        const body = iframeDoc.body;
        log(`\n<span class="info">Body classes:</span> ${body.className || '(none)'}`);
        log(`  Has menu-open: ${body.classList.contains('menu-open')}`);
        
        // Check viewport
        const width = window.innerWidth;
        log(`\n<span class="${width < 991 ? 'success' : 'warning'}">Viewport: ${width}px</span> ${width < 991 ? '‚úì MOBILE' : '‚ö† DESKTOP (need < 991px)'}`);
        
        log('\n' + '='.repeat(60));
        log('<span class="success">DIAGNOSTIC COMPLETE</span>');
        
        if (nav) {
            const right = window.getComputedStyle(nav).right;
            if (right === '0px') {
                log('\n<span class="success">‚úÖ MENU SHOULD BE VISIBLE!</span>');
                log('If you can\'t see it, check:');
                log('  1. Is something covering it? (z-index)');
                log('  2. Is background color correct?');
                log('  3. Try scrolling in the iframe');
            } else {
                log('\n<span class="error">‚ùå MENU IS HIDDEN</span>');
                log(`Right position: ${right} (should be 0px when open)`);
                log('\nTo open menu:');
                log('  1. Click hamburger icon in iframe above');
                log('  2. Or click "Force Open Menu" button');
            }
        }
        
    } catch(e) {
        log(`\n<span class="error">ERROR: ${e.message}</span>`, 'error');
    }
}

function forceOpenMenu() {
    clearOutput();
    log('‚ö° FORCING MENU OPEN...', 'warning');
    
    try {
        const iframe = document.getElementById('siteFrame');
        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
        const nav = iframeDoc.querySelector('.main-nav .nav');
        const hamburger = iframeDoc.querySelector('.menu-trigger');
        const body = iframeDoc.body;
        
        if (nav && hamburger) {
            nav.classList.add('mobile-active');
            hamburger.classList.add('active');
            body.classList.add('menu-open');
            
            log('<span class="success">‚úì Classes added</span>');
            
            setTimeout(() => {
                const styles = window.getComputedStyle(nav);
                log(`\nAfter forcing open:`);
                log(`  right: ${styles.right}`);
                log(`  display: ${styles.display}`);
                log(`  background: ${styles.backgroundColor}`);
                
                if (styles.right === '0px') {
                    log('\n<span class="success">‚úÖ SUCCESS! Menu should be visible now!</span>');
                } else {
                    log(`\n<span class="error">‚ùå FAILED! Right is still: ${styles.right}</span>`, 'error');
                    log('CSS is not applying properly. Need stronger rules.');
                }
            }, 200);
        } else {
            log('<span class="error">‚úó Could not find menu elements</span>', 'error');
        }
    } catch(e) {
        log(`<span class="error">ERROR: ${e.message}</span>`, 'error');
    }
}

function checkCSS() {
    clearOutput();
    log('üìä CHECKING CSS FILES...', 'info');
    
    try {
        const iframe = document.getElementById('siteFrame');
        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
        const styleSheets = iframeDoc.styleSheets;
        
        log(`\nTotal stylesheets: ${styleSheets.length}\n`);
        
        for (let i = 0; i < styleSheets.length; i++) {
            const sheet = styleSheets[i];
            const href = sheet.href || '(inline)';
            log(`${i + 1}. ${href.split('/').pop()}`);
        }
        
        log('\n<span class="warning">‚ö† NOTE:</span> Stylesheets loaded LAST will override earlier ones.');
        log('If mobile-fix-final.css is NOT last, inline styles might be overridden.');
        
    } catch(e) {
        log(`<span class="error">ERROR: ${e.message}</span>`, 'error');
    }
}

function clearCache() {
    log('üóëÔ∏è Reloading with cache clear...', 'warning');
    const iframe = document.getElementById('siteFrame');
    iframe.src = iframe.src + '?nocache=' + Date.now();
    setTimeout(() => {
        log('<span class="success">‚úì Reloaded</span>');
        log('Now run diagnostics again.');
    }, 1000);
}

console.log('DEBUG TOOL LOADED');
</script>

</body>
</html>
